<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <center>
        <form action="">
            <div class="divs">
                <h3><em>Authentification avec jQuery</em></h3>
                Login<input type="text" class="inputs" id="le_login"> <br>
                Code <input type="password" class="inputs" id="le_pass"> 
                <br><br>
                <button type="button" class="buttons" id="but1">Authentifier</button><br>
                Non inscrit? <br>
                <button type="button" class="buttons"><a href="inscrirejQuery.html">S'inscrire</a></button>
                <br><br>
                <div id="avertir" class="divs2"></div>
            </div>
        </form>
    </center>

    <script>
              const HACHAGE = chaineCar =>
        chaineCar.split('').reduce((a, b) => {
            a = (a << 5) - a + b.charCodeAt(0);
            return a & a;
        }, 0);


        $(document).ready(function(){
    $("#but1").click(function(event){
    event.preventDefault();
    let code = $("#le_pass").val();
    let login = $("#le_login").val();
    //recuperation de l'utilisateur a partir du Local Storage
    var user=localStorage.getItem(login);
    var data=JSON.parse(user);
    code = HACHAGE(code);
    //VERIFICATION EN PHASE DE CODE
   // console.log(user)
   // console.log(login + '  ' + code)
    if(data){
        if(login==data.username && code==data.code) {
            $("#avertir").text("Connection réussie") ;
            console.log(user);
        }
        else{
            $("#avertir").text("Login ou code incorrect");
        }
    }
     else $("#avertir").text("Vous n'êtes pas inscrit");
            }
        )
    }
)
    </script>

</body>

</html>