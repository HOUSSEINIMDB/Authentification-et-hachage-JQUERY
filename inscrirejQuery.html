<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <center>
        <form action="">
            <div class="divs">
                <h3><em>Inscrire avec jQuery</em></h3>
                Login<input type="text" class="inputs" id="le_login">
                <br>
                Code <input type="password" class="inputs" id="le_pass">
                <br><br>
                <button type="button" class="buttons" id="but2" type="submit">S'inscrire</button><br>
                Déjà inscrit? <br>
                <button type="button" class="buttons">
                 <a href="authentificationJquery.html">
                    Se connecter 
                 </a>
                </button>
                <br><br>
                <div id="avertir" class="divs2"></div>
            </div>
        </form>
    </center>
    <script>
        const HACHAGE = chaineCar =>
        chaineCar.split('').reduce((a, b) => {
            a = (a << 5) - a + b.charCodeAt(0);
            return a & a;
        }, 0);

$(document).ready(function() {
    $("#but2").click(function (event){
    event.preventDefault();
    let code = $("#le_pass").val();
    let login = $("#le_login").val();

    console.log(login);


    if (code == "") {
        $("#avertir").text("Code obligatoire");    
    }

    //taille minimale 
    else if (code.length < 3) {
        $("#avertir").text("Le code doit avoir une taille de 3 caracteres minimum");
        return false ;
    }
    //taille maximale 
    else if (code.length > 20) {
        $("#avertir").text("Le code doit avoir une taille de 20 caracteres maximum");
        return false;
    }
    //on fait le localStorage et le hachage    
    else{
    
    const user={
        username:login,
        code: HACHAGE(code),
    };
    console.log(HACHAGE(code));//pour verifier si ça marche
    localStorage.setItem(user.username,JSON.stringify(user));
    }
})})
    </script>
</body>

</html>